#!/usr/bin/env ruby

branches = `git branch -r`.chomp.split("\n")
branches.map!(&:strip)

branches.each do |branch|
  puts "================================"
  puts "Considering: #{branch}"
  puts

  system "git log --color --stat -n 1 #{branch}"

  puts
  puts
  puts

  puts "Want to delete it? (y/n)"

  remote, br = branch.split("/")

  case $stdin.gets.chomp.downcase
  when "y"
    system "git push #{remote} :#{br}"
  end

  puts
  puts
  puts

end
